# Notes

-   There isn't any info about output format and type application, so it is done as is(CLI application)
-   I had started **a user-specified duration** part of task, but it took too long. It has too many options, from simplest(implemented) to some kind of graph realisation. It is not recommended to use it.
-   As we expect to generate playlist often, but data is not changing(or very seldom) there is pre-processing and caching onf initial data.
-   There are songs without letters in name - they are ignored and not used
-   There are songs with first or last non-letter symbol - these symbols are ignored, first and last real letters will be used
-   As I haven't info about order of songs, they are in random order, each execution returns unique playlist
-   As I haven't info about possible duplicates in playlist, there is special option
-   It may be less songs in playlist if there isn't song started with needed letter

# Usage

-   `npm start -- -l 10 -d` or `node src/app.js -l 10 -d` to get playlist with length 10 and possible duplicated songs
-   `npm start -- -l 10` or `node src/app.js -l 10` to get playlist with length up to 10 but with unique songs

> **l** - number of songs
>
> **d** - number of songs

If `./files/feed.json` file exists, it is used as cache, else data will be downloaded, pre-processed and saved as `./files/feed.json`

# src/libs

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [Song](#song)
    -   [Properties](#properties)
-   [prepare](#prepare)
    -   [Parameters](#parameters)
-   [SongList](#songlist)
    -   [Parameters](#parameters-1)
    -   [getPlaylist](#getplaylist)
        -   [Parameters](#parameters-2)
-   [helpers](#helpers)
    -   [getRandomFromArray](#getrandomfromarray)
        -   [Parameters](#parameters-3)
    -   [spliceRandomFromArray](#splicerandomfromarray)
        -   [Parameters](#parameters-4)

## Song

Not exported Song type description

Type: [Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)

### Properties

-   `lastLetter` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** last letter of sanitised name
-   `firstLetter` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** first letter of sanitised name
-   `id` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** song id
-   `name` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** song name
-   `duration` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** song duration in ms

## prepare

Download, prepare and save song list

### Parameters

-   `url` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** http url with xml for download
-   `path` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)?** file path to save (optional, default `'./files/feed.json'`)

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)&lt;[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String), [Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[Song](#song)>>>** Structure where songs info is stored for fast
search

## SongList

Song list object-storage

### Parameters

-   `map` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)&lt;[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String), [Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[Song](#song)>>** special object generated by "prepare" function

### getPlaylist

Get new chained play list

#### Parameters

-   `playlistLength` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** number of songs in new play list
-   `duplicates` **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)?** if true song duplicates may be in playlist,
    else - no duplicates, but list can be shorter than expected (optional, default `false`)

Returns **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[Song](#song)>** new playlist

## helpers

helper.js - Helper functions

### getRandomFromArray

Get random element from array

#### Parameters

-   `a` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;T>** array (optional, default `[]`)

Returns **T** element

### spliceRandomFromArray

Get and remove element from array

#### Parameters

-   `a` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;T>** array (optional, default `[]`)

Returns **T** element
